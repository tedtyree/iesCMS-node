[[{ minviewlevel:7, template: admin }]]

<SCRIPT type="text/javascript" LANGUAGE="JavaScript">

function do_reboot() {
    
    if (confirm('Are you sure you would like to Reboot the Server?')) {
        alert('go reboot');
        
        var xhr = new XMLHttpRequest();
        var q = '?cmd=reboot';
        xhr.open('GET', 'safuCmd' + q);
        
            xhr.onload = function() {
                if (xhr.status === 200) {
                    if (xhr.responseText.indexOf('success') >= 0) {
                            setTimeout(success, 100);
                        } else { setTimeout(epicFail, 100); }
                    } else { 
                        // NOTE! The call to the website failed.  Let the user know.
                        alert('Call failed to respond. This could be due to an internet connection issue. Please try again later.');
                    }
            };
            
            xhr.send();
        } // end if Confirm()   
    return false;
}

function success() {
    alert('Reboot command has been queued.');
}

function epicFail() {
    alert('Command failed to initiate. This could be due to an internet connection issue. Please try again later.');
}

</SCRIPT>

<h1>safu Control Panel</h1>
<ul>
<li ><input type='submit' value='Reboot Server' onClick='return do_reboot();'></li>
</ul>

